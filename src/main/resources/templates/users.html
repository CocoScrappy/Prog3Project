<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="ISO-8859-1">
    <title>List Users</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.0/dist/bootstrap-table.min.css">
</head>
<body>
<div th:replace="fragments/header :: header"></div>
<div class="container text-center">
    <div class="mb-3">
        <form th:action="@{/logout}" method="post">
            <p class="h1 mb-3">
                Welcome <b>[[${#request.userPrincipal.principal.name}]]</b>
            </p>
            <input type="submit" class="btn btn-primary" value="Sign Out"/>
        </form>
    </div>
    <div class="mb-3">
        <h1>List of Users</h1>
        <div>
            <p th:text="${msg}"></p>
        </div>
        <div class="mb-3">
            <a th:href="@{/admin/new-user}" class="btn btn-primary" role="button">Create New Product</a>
        </div>
    </div>
    <div class="d-grid gap-2 col-10 mx-auto mt-3">
        <table id="table" class="table table-striped table-hover">
            <thead class="thead-dark">
            <tr>
                <th scope="col">User ID</th>
                <th>Username</th>
                <th>Name</th>
                <th>Email address</th>
                <th>Date of Birth</th>
                <th>Role</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="user: ${listUsers}">
                <td th:text="${user.id}">User ID</td>
                <td th:text="${user.username}">Username</td>
                <td th:text="${user.name}">Name</td>
                <td th:text="${user.email}">Email address</td>
                <td th:text="${user.dateOfBirth}">Date of Birth</td>
                <td th:text="${user.roles}">Date of Birth</td>
                <td>
                    <a th:href="@{'/admin/edit/user/' + ${user.id}}" class="btn btn-primary" role="button">Edit</a><span> </span>
                    <a th:href="@{'/admin/delete/user/' + ${user.id}}" class="btn btn-danger" role="button" onclick="confirmDelete();">Delete</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<script>
    function confirmDelete() {
    window.confirm("are you sure you want to delete?");
    }
</script>
<div id="external_scripts">
    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
    <script src="https://unpkg.com/bootstrap-table@1.21.0/dist/bootstrap-table.min.js"></script>
    <script
            src="https://unpkg.com/bootstrap-table@1.20.2/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
</div>
</body>
</html>